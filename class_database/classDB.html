<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCLA Classes</title>

    <style>
        /* Add some basic styling for better formatting */
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            color: #333;
        }

        #search-bar {
            margin-bottom: 20px;
        }

        #classes-list {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>UCLA Classes</h1>

    <!-- Search bar -->
    <input type="text" id="search-bar" placeholder="Search for classes">

    <div id="classes-list"></div>

    <script>
        // Fetch data from Flask API
        fetch('http://127.0.0.1:5000/api/classes')
            .then(response => response.json())
            .then(data => {
                const classesList = document.getElementById('classes-list');
                const searchBar = document.getElementById('search-bar');

                // Function to filter classes based on search input
                const filterClasses = () => {
                    const searchTerm = searchBar.value.toLowerCase();
                    const filteredClasses = data.classes.filter(cls => {
                        const classString = `${cls.department} ${cls.id} ${cls.name_description} ${cls.name}`.toLowerCase();
                        return classString.includes(searchTerm);
                    });

                    // Clear previous list
                    classesList.innerHTML = '';

                    // Display filtered classes
                    filteredClasses.forEach(cls => {
                        const classItem = document.createElement('div');
                        classItem.innerHTML = `
                            <strong>${cls.department} ${cls.id}</strong>: ${cls.name_description} - ${cls.name}
                            <br>
                        `;
                        classesList.appendChild(classItem);
                    });
                };

                // Attach filter function to input event
                searchBar.addEventListener('input', filterClasses);

                // Initial display of all classes
                filterClasses();
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>

</body>
</html>
